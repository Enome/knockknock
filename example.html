<!DOCTYPE html>
<html>
  <head>
    <script src='lib/knockout-1.3.0beta.debug.js' type='text/javascript'>
    </script>
    <script src='build/kk.js' type='text/javascript'></script>

    <script type='text/javascript'>
      var Required = window.validators.Required;
      var Max = window.validators.Max
      var Regex = window.validators.Regex;
      var Email = window.validators.Email
      var Number = window.validators.Number
      var Equals = window.validators.Equals

      var ViewModel = function(){

        // Observables
        this.required = ko.observable();
        this.max      = ko.observable();
        this.regex    = ko.observable();
        this.email    = ko.observable();
        this.number   = ko.observable();
        this.equals   = ko.observable();
        this.combination = ko.observable();

        // Validation
        this.validation = new Validation();

        this.validation.addValidators( this.required, new Required() );
        this.validation.addValidators( this.max, new Max(5) );
        this.validation.addValidators( this.regex, new Regex( /[^/]+\d+/ ) );
        this.validation.addValidators( this.email, new Email() );
        this.validation.addValidators( this.number, new Number() );
        this.validation.addValidators( this.equals, new Equals( this.number ) );
        this.validation.addValidators( this.combination, new Required(), new Email() );

      }; 

      ViewModel.prototype.validate = function(){
        if( this.validation.validate() ){
          alert('Do ajaxy stuff');
        };
      };

      window.onload = function(){
        ko.applyBindings( new ViewModel() );
      };
    </script>

    <style type='text/css'>

      input {
        border: 1px solid silver;
        padding: 3px 5px;
        width: 250px;
      }

      label { display : block; }
      input.invalid { background-color: #ffe57d; }
      ul { color: #ff002b; }

    </style>

  </head>
  <body>

    <h1>Knock-knock Validation: Example</h1>

    <p>
      For more information check out: <a href='http://github.com/Enome/knockknock'>knockknock on Github</a>.
    </p>

    <p>
      This example uses addValidators directly which might be useful. Check out example_short.html for a shorter syntax to define validation rules onto an observable.
    </p>

    <p>
      <label>Required:</label>
      <input type='text' data-bind='value: required, validateCss: required' />
      <ul data-bind='foreach: required.errors'>
        <li data-bind='text: $data'></li>
      </ul>
    </p>

    <p>
      <label>Max: 5</label>
      <input type='text' data-bind='value: max, validateCss: max' />
      <ul data-bind='foreach: max.errors'>
        <li data-bind='text: $data'></li>
      </ul>
    </p>

    <p>
      <label>Regex: [^/]+\d+</label>
      <input type='text' data-bind='value: regex, validateCss: regex' />
      <ul data-bind='foreach: regex.errors'>
        <li data-bind='text: $data'></li>
      </ul>
    </p>

    <p>
      <label>Email:</label>
      <input type='text' data-bind='value: email, validateCss: email' />
      <ul data-bind='foreach: email.errors'>
        <li data-bind='text: $data'></li>
      </ul>
    </p>

    <p>
      <label>Number:</label>
      <input type='text' data-bind='value: number, validateCss: number' />
      <ul data-bind='foreach: number.errors'>
        <li data-bind='text: $data'></li>
      </ul>
    </p>


    <p>
      <label>Equals: ( evaluated against Number )</label>
      <input type='text' data-bind='value: equals, validateCss: equals' />
      <ul data-bind='foreach: equals.errors'>
        <li data-bind='text: $data'></li>
      </ul>
    </p>

    <p>
      <label>Required and Email:</label>
      <input type='text' data-bind='value: combination, validateCss: combination' />
      <ul data-bind='foreach: combination.errors'>
        <li data-bind='text: $data'></li>
      </ul>
    </p>

    <p>
      <button data-bind='click: validate'>Validate</button>
    </p>

  </body>
</html>
